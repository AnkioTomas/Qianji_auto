<html>
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>文本识别规则编辑</title>

    <link href="../Public/css/regular22.css" rel="stylesheet">
    <link href="../Public/css/regulars.css" rel="stylesheet">
    <link href="../Public/css/tip.css" rel="stylesheet">
</head>
<body>
<div class="rule">
    <form action="">
        <div class="sort_name">
            <label for="sort_name">规则名称</label>
            <div class="rule_content">
                <div class="rule_content1">
                    <input id="sort_name" placeholder="分类规则名称" type="text">
                </div>
            </div>
        </div>
        <div class="sort_name">
            <label for="sort_remark">规则说明</label>
            <div class="rule_content">
                <div class="rule_content1">
                    <textarea cols="30" id="sort_remark" name="sort_remark" placeholder="请输入说明..."
                              rows="5"></textarea>
                </div>
            </div>
        </div>
        <div class="sort_name">
            <label for="sort_package">适用app包名</label>
            <div class="rule_content">
                <div class="rule_content1">
                    <input id="sort_package" placeholder="如：cn.ankio.net" type="text">
                </div>
            </div>
        </div>

        <div class="sort_remark">
            <label>正则测试</label>
        </div>
        <div class="main " style="background-color: #fff">
            <div class="inner">
                <div id="preset_regex">
                    <h4>常用正则：</h4>
                    <ul class="clearfix">
                        <li><a data-regex="\d+(\.\d+)?" href="#">匹配浮点数（常用于金额）</a></li>
                        <li><a data-regex="[\u4e00-\u9fa5]+" href="#">匹配中文</a></li>
                        <li><a data-regex="[\s\S]*" href="#">匹配任意字符</a></li>
                        <li><a data-regex=".*" href="#">匹配任意不换行字符</a></li>
                    </ul>
                </div>
                <h4>正则表达式：</h4>
                <div class="regex-wrapper mgb10">
                    <textarea cols="100" id="regex_input" rows="3" style="display: none;"
                              tabindex="1"></textarea>
                </div>
                <h4>测试数据：</h4>
                <div class="str-wrapper">
                    <textarea cols="100" id="str_input" rows="10" style="display: none;"
                              tabindex="2"></textarea>
                </div>
                <h3 style="display: none">共找到 <var id="result_count">0</var> 处匹配结果</h3>
                <pre id="result_content" style="display: none"></pre>
                <h3>共找到 <var id="result_count2">0</var> 处分组结果</h3>
                <pre id="result_content2"></pre>
            </div>
        </div>



        <div class="project_location">
            <label>匹配项目所在位置</label>
            <div class="rule_content">
                <div class="rule_content2">
                    <label for="card_num">尾号</label>
                    <input id="card_num" placeholder="可输入数字或中文" type="text">
                </div>

                <div class="rule_content2">
                    <label for="account_name1">账户名称1</label>
                    <input id="account_name1" placeholder="可输入数字或中文" type="text">
                </div>

                <div class="rule_content2">
                    <label for="account_name2">账户名称2</label>
                    <input id="account_name2" placeholder="可输入数字或中文" type="text">
                </div>

                <div class="rule_content2">
                    <label for="consumption_type">收支类型</label>
                    <select id="consumption_type" name="consumption_type">
                        <option selected value="0"> 支出</option>
                        <option value="1"> 收入</option>
                    </select>
                </div>

                <div class="rule_content2">
                    <label for="backstage_transaction">后台交易</label>
                    <select id="backstage_transaction" name="backstage_transaction">
                        <option selected value="0"> 是</option>
                        <option value="1"> 否</option>
                    </select>
                </div>

                <div class="rule_content2">
                    <label for="price">金额</label>
                    <input id="price" placeholder="可输入数字" step="any" type="number">
                </div>

                <div class="rule_content2">
                    <label for="commission">手续费</label>
                    <input id="commission" placeholder="可输入数字" step="any" type="number">
                </div>

                <div class="rule_content2">
                    <label for="merchant_name">商户名称</label>
                    <input id="merchant_name" placeholder="可输入数字或中文" type="text">
                </div>

                <div class="rule_content2">
                    <label for="merchant_remark">商户备注</label>
                    <input id="merchant_remark" placeholder="可输入数字或中文" type="text">
                </div>
            </div>
        </div>

        <div class="buttons">
            <button class="button1" name="测试">测试</button>
            <button name="保存">保存</button>
        </div>
    </form>
</div>
<script src="../Public/jquery/jquery.js"></script>
<script src="../Public/jquery/1.js"></script>
<script src="../Public/jquery/2.js"></script>
<script>
    $("#result_count").bind("DOMNodeInserted",function(e){
        var data = $("#regex_input").val();
        var pattern = eval("/"+data+"/");
        var str="";
        var len=1;
        if(pattern.test($("#str_input").val())){
            var array = pattern.exec($("#str_input").val());
            console.log(array)
            len=array.length;
            for(var i=1;i<len;i++){
                str+="<b>【"+i+"】</b> "+array[i]+"<br>"
            }

        }
        $("#result_count2").html((len-1).toString());
        $("#result_content2").html(str);
    })







</script>
</body>
</html>
